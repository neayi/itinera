# Dockerfile for development
FROM node:22-alpine

RUN apk add --no-cache libc6-compat bash

WORKDIR /app

# Copy package files and scripts needed for postinstall
COPY package.json package-lock.json* ./
COPY scripts ./scripts

# Install dependencies
RUN npm install

# Copy source code
COPY . .

# Expose port
EXPOSE 3000

# Run development server without Turbopack (better Docker file watching with Webpack)
# Use standard "next dev" which defaults to Webpack in Next.js 15+
# Note: Webpack's polling (configured in next.config.js) works better in Docker
CMD ["npm", "run", "dev"]
